# 🐢 토북 팀 인스턴스 별 성능 비교

## ⚒️ OS
- **운영 체제**: Ubuntu

## ⚙️ 아키텍처
- **64비트 아키텍처**: x86 (Intel/AMD) 및 ARM (AWS Graviton2)

## 테스트 항목

1. **크롤링 작업 처리 속도**
   - 네이버 증권에서 다량 현재 주가 크롤링  

2. **메모리 할당 속도**
   - Numpy 배열에 10억 개의 float 값을 할당 

3. **디스크 I/O 처리 속도**
   - 대량의 문자열을 파일로 저장 (대략 2억 개)

4. **API 요청 처리 속도**
   - 다수의 사용자 깃허브 프로필 조회 API 요청
  
## 개요


## 분석 주제

- **아키텍처 차이에 따른 성능 비교**
  - x86 아키텍처와 ARM 아키텍처 간의 성능 차이 분석

- **인스턴스 크기 차이에 따른 성능 비교**
  - 메모리 용량에 따른 성능 차이 평가

- **범용 인스턴스 T,M 비교**
  - 범용 인스턴스 별 메모리 최적화 인스턴스 간의 성능 비교

  
 
## 🔎 아키텍처 차이에 따른 성능 차이
 ## t3.small ❓ t4g.small 
 | 특징       | t3.small | t4g.small  |
|------------|------------------------------|--------------------------------|
| 아키텍처    | x86 (Intel/AMD 기반)          | ARM (AWS Graviton2 프로세서)   |
| 메모리     | 2 GiB                        | 2 GiB                          |
| vCPU       | 2 코어                       | 2 코어                         |
| 요금       | $0.026 / 시간                | $0.0496 / 시간                 |
| 용도       | 범용 인스턴스  | 범용 인스턴스|
| 네트워크 성능 | 최대 5 Gbps (EBS 최적화 포함)   | 최대 5 Gbps (EBS 최적화 포함)   |

<img src="https://github.com/user-attachments/assets/5efbb9cd-8bac-4c94-b0d1-3590b1d2823d" alt="Benchmark" width="800px" />

## 📈결과 분석

ARM 기반 아키텍처를 사용하는 t4g와 인텔의 x86 아키텍처를 사용하는 t3를 비교해보았습니다.
표를 해석해보면 x86 아키텍처를 사용하는 t4g 유형의 인스턴스가 크기에 상관없이 t3보다 모든 테스트에서 속도가 빠르다는 것을 알 수 있습니다.

두 인스턴스 모두 2개의 vCPU와 2 GiB 메모리, 5기가비트 네트워크 성능을 갖추고 있습니다. 따라서 성능 차이는 성능 차이는 다른 요인에서 기인할 가능성이 높다고 생각했습니다. 

그래서 ARM과 x86기반의 아키텍처 차이를 살펴보았을 때, ARM 기반은 멀티 코어 성능을 효율적으로 활용하여, 높은 네트워크 대역폭을 처리할 수 있어서 크롤링 작업에서 성능이 좋다는 점을 알게 되었습니다. 또한, 메모리와 디스크 할당의 경우, 단순한 명령어 집합을 사용하여 단순 작업을 빠르게 처리할 수 있습니다. 
- t4g 인스턴스는 다량의 데이터를 네이버 증권에서 크롤링할 때 우수한 속도를 보였습니다. ARM 기반 프로세서는 멀티코어 성능을 효율적으로 활용하여 높은 네트워크 대역폭을 처리할 수 있으며, 이는 크롤링 작업에서 매우 중요한 요소입니다. 

## 🔎 메모리 차이에 따른 성능 차이 비교 
 ##  t4g.small ❓ t4g.large 
| 특징         | t4g.small                        | t4g.large                        |
|--------------|----------------------------------|----------------------------------|
| 아키텍처      | ARM (AWS Graviton2 프로세서)     | ARM (AWS Graviton2 프로세서)     |
| 메모리       | 2 GiB                            | 8 GiB                            |
| vCPU         | 2 코어                           | 4 코어                           |
| 요금         | $0.0496 / 시간                   | $0.0992 / 시간                   |
| 용도         | 범용 인스턴스                    | 범용 인스턴스                    |
| 네트워크 성능 | 최대 5 Gbps (EBS 최적화 포함)   | 최대 5 Gbps (EBS 최적화 포함)   |

<img src="https://github.com/user-attachments/assets/f173f2ba-696e-40e4-af90-7be0330be618" alt="Benchmark" width="800px" />


## 📈결과 분석
- 인스턴스의 크기가 클수록 메모리 처리 속도, 파일 쓰기 속도에서 큰 성능 차이를 보였습니다. 하지만 크롤링 작업에서는 메모리 크기가 크게 영향을 미치지 않았습니다. 이는 **크롤링 작업**이 주로 **네트워크 대역폭**과 **CPU 성능**에 의존하기 때문입니다.
- 메모리가 클수록, 많은 사이트를 크롤링할 때 **수집한 데이터를 메모리에 저장**할 수 있어 성능이 향상됩니다. 반면 메모리가 작을 경우, **메모리 부족**으로 인해 **디스크 스왑**이 발생해 성능 저하가 생길 수 있습니다.


## 🔎 범용 인스턴스 T,M 비교 
 ##  t3.large  ❓  m5.large
| 특징         | t3.large                         | m5.large                         |
|--------------|----------------------------------|----------------------------------|
| 아키텍처      | x86 (Intel/AMD 기반)              | x86 (Intel/AMD 기반)              |
| 메모리       | 8 GiB                            | 8 GiB                            |
| vCPU         | 4 코어                           | 2 코어                           |
| 요금         | $0.1 / 시간                      | $0.118 / 시간                    |
| 용도         | 범용 인스턴스                    | 범용 인스턴스                    |
| 네트워크 성능 | 최대 5 Gbps (EBS 최적화 포함)   | 최대 10 Gbps (EBS 최적화 포함)  |

<img src="https://github.com/user-attachments/assets/5178b44d-6eaa-4800-bc98-fed05041db86" alt="Benchmark" width="800px" />


## 📈결과 분석
- 네트워크 대역폭이 5 Gbps와 10 Gbps의 차이로 크롤링 속도에서 차이를 보이며, 균형 잡힌 cpu 성능을 제공하는 M이  모든 테스트에서  더 나은 성능을 보였습니다
- 하지만 chatgpt에 따르면 **T 시리즈**는 **비용 효율성**이 뛰어나고, 가벼운 작업에서 **버스트 가능한 성능**을 제공하여, 일정하지 않은 CPU 사용량을 가진 워크로드에 적합합니다


 
# 최종 결과 
앞선 팀의 README.md 를 참고했습니다.
